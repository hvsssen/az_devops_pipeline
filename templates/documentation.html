<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Azure MCP DevOps Agent - Complete GitHub, Docker, Terraform & Azure Automation</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/themes/prism.min.css" rel="stylesheet">
    <link href="/static/style.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container">
            <a class="navbar-brand" href="/">
                <strong>‚òÅÔ∏è Azure MCP DevOps Agent</strong>
            </a>
            {% if logged_in %}
                <span class="badge bg-success">‚úÖ Connected</span>
            {% else %}
                <span class="badge bg-warning">‚ö†Ô∏è Not Connected</span>
            {% endif %}
        </div>
    </nav>

    <div class="container mt-4">
        <!-- Hero Section -->
        <div class="row">
            <div class="col-12">
                <div class="jumbotron bg-primary text-white p-5 rounded">
                    <h1 class="display-4">Azure MCP DevOps Agent</h1>
                    <p class="lead">An AI-powered DevOps Agent with MCP interface: <strong>GitHub + Docker + Terraform + Azure</strong> integration with Smart Automation.</p>
                    <hr class="my-4">
                    <p>üöÄ Complete DevOps Pipeline: GitHub ‚Üí Docker ‚Üí Terraform ‚Üí Azure with intelligent automation!</p>
                </div>
            </div>
        </div>

        <!-- Key Features -->
        <div class="row mt-5">
            <div class="col-12">
                <h2>üåü Complete DevOps Integration</h2>
                <div class="row mt-3">
                    <div class="col-md-3">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">üêô GitHub Integration</h5>
                                <p class="card-text">
                                    ‚Ä¢ OAuth authentication<br>
                                    ‚Ä¢ Repository management<br>
                                    ‚Ä¢ Automated cloning<br>
                                    ‚Ä¢ Branch operations
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">üê≥ Docker Deployment</h5>
                                <p class="card-text">
                                    ‚Ä¢ Smart port detection<br>
                                    ‚Ä¢ Automated builds<br>
                                    ‚Ä¢ Docker Hub push<br>
                                    ‚Ä¢ Container management
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">üèóÔ∏è Terraform IaC</h5>
                                <p class="card-text">
                                    ‚Ä¢ Azure AKS clusters<br>
                                    ‚Ä¢ Remote state backend<br>
                                    ‚Ä¢ Auto-scaling config<br>
                                    ‚Ä¢ OIDC integration
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-3">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">‚òÅÔ∏è Azure Cloud</h5>
                                <p class="card-text">
                                    ‚Ä¢ Azure CLI integration<br>
                                    ‚Ä¢ VM management<br>
                                    ‚Ä¢ Cost analysis<br>
                                    ‚Ä¢ Resource monitoring
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row mt-3">
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">ü§ñ AI Agent Intelligence</h5>
                                <p class="card-text">
                                    ‚Ä¢ Intelligent automation<br>
                                    ‚Ä¢ Context-aware decisions<br>
                                    ‚Ä¢ Adaptive workflows<br>
                                    ‚Ä¢ Smart error handling
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="card h-100">
                            <div class="card-body">
                                <h5 class="card-title">üîå MCP Protocol</h5>
                                <p class="card-text">
                                    ‚Ä¢ Standard interface<br>
                                    ‚Ä¢ Claude integration<br>
                                    ‚Ä¢ Tool-based API<br>
                                    ‚Ä¢ Extensible design
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Complete DevOps Workflow -->
        <div class="row mt-5">
            <div class="col-12">
                <div class="alert alert-info">
                    <h4>üöÄ Complete DevOps Workflow</h4>
                    <p><strong>Your AI-powered DevOps Agent provides end-to-end automation with intelligence!</strong></p>
                    <div class="row">
                        <div class="col-md-6">
                            <h6>üìã Development Flow:</h6>
                            <ol class="mb-0">
                                <li>üêô <strong>GitHub:</strong> List, clone, manage repositories</li>
                                <li>üîç <strong>Smart Detection:</strong> Auto-detect ports and configurations</li>
                                <li>üê≥ <strong>Docker:</strong> Build, tag, and push images</li>
                                <li>üèóÔ∏è <strong>Terraform:</strong> Generate and manage infrastructure</li>
                                <li>‚òÅÔ∏è <strong>Azure:</strong> Deploy to cloud infrastructure</li>
                            </ol>
                        </div>
                        <div class="col-md-6">
                            <h6>üìä Operations & Monitoring:</h6>
                            <ul class="mb-0">
                                <li>üí∞ <strong>Cost Analysis:</strong> Track Azure spending</li>
                                <li>üñ•Ô∏è <strong>VM Management:</strong> Monitor virtual machines</li>
                                <li>üìà <strong>Usage Reports:</strong> Analyze resource consumption</li>
                                <li>üîß <strong>Resource Groups:</strong> Organize cloud resources</li>
                                <li>üèóÔ∏è <strong>Infrastructure:</strong> Terraform state management</li>
                                <li>ü§ñ <strong>AI Intelligence:</strong> Context-aware automation</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API Endpoints -->
        <div class="row mt-5">
            <div class="col-12">
                <h2>üîó Complete API Documentation</h2>
                <div class="accordion" id="apiAccordion">
                    <!-- GitHub Endpoints -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="githubHeading">
                            <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#githubCollapse">
                                üêô GitHub Integration APIs
                            </button>
                        </h2>
                        <div id="githubCollapse" class="accordion-collapse collapse show" data-bs-parent="#apiAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Method</th>
                                                <th>Endpoint</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/github/login</code></td>
                                                <td>Initiate GitHub OAuth login</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/github/repos</code></td>
                                                <td>List user repositories</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/clone</code></td>
                                                <td>Clone repository locally</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Docker Endpoints -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="dockerHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#dockerCollapse">
                                üê≥ Docker & Container APIs
                            </button>
                        </h2>
                        <div id="dockerCollapse" class="accordion-collapse collapse" data-bs-parent="#apiAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Method</th>
                                                <th>Endpoint</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-success">POST</span></td>
                                                <td><code>/deploy</code></td>
                                                <td>Build and deploy Docker image</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/run_container</code></td>
                                                <td>üî• Run container with smart port detection</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/detect_ports</code></td>
                                                <td>üî• Analyze repository for exposed ports</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Azure Endpoints -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="azureHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#azureCollapse">
                                ‚òÅÔ∏è Azure Cloud APIs
                            </button>
                        </h2>
                        <div id="azureCollapse" class="accordion-collapse collapse" data-bs-parent="#apiAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Method</th>
                                                <th>Endpoint</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/azure/login</code></td>
                                                <td>üÜï Launch Azure CLI login</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/azure/subscriptions</code></td>
                                                <td>üÜï List Azure subscriptions</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/azure/vms</code></td>
                                                <td>üÜï Get VM usage and cost analysis</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/azure/resource-groups</code></td>
                                                <td>üÜï List Azure resource groups</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/azure/vm-details</code></td>
                                                <td>üÜï Get detailed VM information</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-success">POST</span></td>
                                                <td><code>/azure/command</code></td>
                                                <td>üÜï Execute Azure CLI commands</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Terraform Endpoints -->
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="terraformHeading">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#terraformCollapse">
                                üèóÔ∏è Terraform Infrastructure APIs
                            </button>
                        </h2>
                        <div id="terraformCollapse" class="accordion-collapse collapse" data-bs-parent="#apiAccordion">
                            <div class="accordion-body">
                                <div class="table-responsive">
                                    <table class="table table-striped">
                                        <thead>
                                            <tr>
                                                <th>Method</th>
                                                <th>Endpoint</th>
                                                <th>Description</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><span class="badge bg-success">POST</span></td>
                                                <td><code>/terraform/generate</code></td>
                                                <td>üÜï Generate Terraform configuration for AKS</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/terraform/init</code></td>
                                                <td>üÜï Initialize Terraform with Azure backend</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-primary">GET</span></td>
                                                <td><code>/terraform/plan</code></td>
                                                <td>üÜï Show Terraform execution plan</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-warning">GET</span></td>
                                                <td><code>/terraform/apply</code></td>
                                                <td>üÜï Apply Terraform changes to Azure</td>
                                            </tr>
                                            <tr>
                                                <td><span class="badge bg-danger">GET</span></td>
                                                <td><code>/terraform/destroy</code></td>
                                                <td>üÜï Destroy Terraform-managed resources</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Usage Examples -->
        <div class="row mt-5">
            <div class="col-12">
                <h2>üí° Complete DevOps Workflow Examples</h2>
                <div class="card">
                    <div class="card-body">
                        <h5>1. End-to-End Development & Deployment</h5>
                        <pre class="language-python"><code># Complete workflow: GitHub ‚Üí Docker ‚Üí Terraform ‚Üí Azure
# Step 1: GitHub Authentication & Repository Management
github_login = github_login_mcp_github_login_get()
repos = get_repositories_github_repos_get()
clone_result = clone_repository_clone_get(repo_url="https://github.com/user/webapp")

# Step 2: Smart Docker Build & Deploy
port_detection = detect_ports_endpoint(repo_path="repos/webapp") 
deploy_result = deploy_deploy_post({
    "repo_full_name": "user/webapp",
    "tag": "latest",
    "image_name": "webapp", 
    "repo_path": "repos/webapp"
})

# Step 3: Azure Cloud Management
azure_login = azure_login()
subscriptions = azure_subscriptions()
vm_usage = azure_vm_usage()

# Step 4: Terraform Infrastructure as Code
terraform_config = {
    "user_id": "hassen123",
    "cluster_name": "my-aks-cluster",
    "region": "eastus",
    "node_count": 3,
    "vm_size": "Standard_DS2_v2",
    "auto_scaling": True,
    "min_nodes": 1,
    "max_nodes": 5,
    "enable_monitoring": True,
    "private_cluster": False,
    "dns_domain": "myapp.local",
    "enable_oidc": True,
    "tags": {"environment": "production", "project": "webapp"}
}

terraform_generate = terraform_generate_main_tf(config=terraform_config, repo_path="repos/webapp")
terraform_init = terraform_init(repo_path="repos/webapp")
terraform_plan = terraform_plan(repo_path="repos/webapp")

# Step 5: Run with Auto-Detection
container_result = run_docker_container(
    image="webapp",
    tag="latest", 
    repo_path="repos/webapp"
)</code></pre>

                        <h5 class="mt-4">2. Infrastructure as Code with Terraform</h5>
                        <pre class="language-python"><code># Generate and manage Azure infrastructure with Terraform
# Step 1: Generate Terraform configuration
config = {
    "user_id": "unique_user_id",
    "cluster_name": "production-aks",
    "region": "eastus2",
    "node_count": 3,
    "vm_size": "Standard_DS3_v2",
    "auto_scaling": True,
    "min_nodes": 2,
    "max_nodes": 10,
    "enable_monitoring": True,
    "private_cluster": True,
    "dns_domain": "internal.company.com",
    "enable_oidc": True,
    "tags": {
        "environment": "production",
        "project": "webapp",
        "owner": "devops-team"
    }
}

# Generate Terraform files with Azure backend
terraform_result = terraform_generate_main_tf(
    config=config,
    repo_path="path/to/project",
    use_remote_backend=True
)

# Initialize Terraform (connects to Azure storage backend)
init_result = terraform_init(repo_path="path/to/project")

# Plan infrastructure changes
plan_result = terraform_plan(repo_path="path/to/project")

# Apply changes (creates AKS cluster with all configurations)
apply_result = terraform_apply(repo_path="path/to/project")</code></pre>

                        <h5 class="mt-4">3. Azure Cloud Operations</h5>
                        <pre class="language-python"><code># Azure resource management and monitoring
# Authentication
azure_login_response = azure_login()

# List subscriptions and resources
subscriptions = azure_subscriptions()
resource_groups = azure_resource_groups()

# VM management and cost analysis
vm_usage_data = azure_vm_usage()
vm_details = azure_vm_details(
    vm_name="my-vm", 
    resource_group="my-rg"
)

# Execute custom Azure CLI commands
command_result = azure_command_async(command="vm list --output table")</code></pre>

                        <h5 class="mt-4">4. Cost Monitoring & Analysis</h5>
                        <pre class="language-bash"><code># Get Azure cost and usage data
curl "http://localhost:8000/azure/vms"

# Response includes:
{
  "status": "ok",
  "vms": [...],           # List of all VMs
  "total_cost": 125.50,   # Total cost (last 30 days)
  "currency": "USD",      # Currency
  "debug": [...]          # Debug information
}</code></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Installation -->
        <div class="row mt-5 mb-5">
            <div class="col-12">
                <h2>üì¶ Installation & Setup</h2>
                <div class="card">
                    <div class="card-body">
                        <h5>Prerequisites</h5>
                        <ul>
                            <li>Python 3.8+</li>
                            <li>Docker installed and running</li>
                            <li>Azure CLI installed</li>
                            <li>Terraform CLI installed</li>
                            <li>Git</li>
                            <li>Docker Hub account</li>
                            <li>Azure subscription</li>
                        </ul>
                        
                        <h5 class="mt-4">Complete Setup</h5>
                        <pre class="language-bash"><code># 1. Clone the MCP server
git clone https://github.com/hvsssen/az_devops_pipeline.git
cd az_devops_pipeline/azure_mcp_agent_hassen

# 2. Install Python dependencies
pip install fastapi uvicorn python-dotenv httpx gitpython fastapi-mcp

# 3. Install Azure CLI and Terraform (if not installed)
# Azure CLI:
# Windows: https://aka.ms/installazurecliwindows
# macOS: brew install azure-cli
# Linux: curl -sL https://aka.ms/InstallAzureCLIDeb | sudo bash

# Terraform:
# Windows: choco install terraform
# macOS: brew install terraform
# Linux: https://learn.hashicorp.com/tutorials/terraform/install-cli

# 4. Configure environment
echo "DOCKER_USERNAME=your_username" > .env
echo "DOCKER_PASSWORD=your_password" >> .env

# 5. Run the server
python server.py

# 6. Access documentation at http://localhost:8000</code></pre>

                        <h5 class="mt-4">üÜï Latest AI Agent Features</h5>
                        <div class="alert alert-success">
                            <h6>‚úÖ Evolved from MCP Server to AI-powered DevOps Agent:</h6>
                            <ul class="mb-0">
                                <li><strong>AI Intelligence:</strong> Context-aware automation and decision making</li>
                                <li><strong>Terraform Integration:</strong> Complete Infrastructure as Code with Azure backend</li>
                                <li><strong>Smart State Management:</strong> Automated Azure storage account for Terraform state</li>
                                <li><strong>Unified Interface:</strong> GitHub + Docker + Terraform + Azure in one system</li>
                                <li><strong>Azure Authentication:</strong> Seamless integration with Azure CLI</li>
                                <li><strong>MCP Protocol:</strong> Standardized interface for AI model integration</li>
                                <li><strong>Auto-scaling AKS:</strong> Kubernetes clusters with OIDC and monitoring</li>
                                <li><strong>End-to-End Automation:</strong> From code to cloud infrastructure</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <footer class="bg-dark text-white mt-5 py-4">
        <div class="container">
            <div class="row">
                <div class="col-md-8">
                    <h5>‚òÅÔ∏è Azure MCP DevOps Agent</h5>
                    <p>AI-powered DevOps automation: GitHub + Docker + Terraform + Azure</p>
                    <p class="text-muted">Built with FastAPI ‚Ä¢ Infrastructure as Code ‚Ä¢ AI Intelligence ‚Ä¢ Model Context Protocol</p>
                </div>
                <div class="col-md-4 text-end">
                    <p>
                        <a href="https://github.com/hvsssen/az_devops_pipeline" class="text-white">
                            üìÅ View on GitHub
                        </a>
                    </p>
                    <p>Status: {% if logged_in %}<span class="text-success">‚úÖ Connected</span>{% else %}<span class="text-warning">‚ö†Ô∏è Not Connected</span>{% endif %}</p>
                </div>
            </div>
        </div>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.24.1/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
